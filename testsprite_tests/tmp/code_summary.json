{
    "tech_stack": [
        "TypeScript",
        "NestJS",
        "PostgreSQL",
        "TypeORM",
        "JWT",
        "Passport",
        "pnpm",
        "Turborepo"
    ],
    "features": [
        {
            "name": "User Registration",
            "description": "Register a new user with email, password, tenant, and role",
            "files": [
                "apps/api/src/auth/auth.controller.ts",
                "apps/api/src/auth/auth.service.ts",
                "apps/api/src/auth/dto/auth.dto.ts"
            ],
            "api_doc": {
                "openapi": "3.0.0",
                "paths": {
                    "/auth/register": {
                        "post": {
                            "summary": "Register a new user",
                            "requestBody": {
                                "required": true,
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "type": "object",
                                            "required": [
                                                "email",
                                                "password",
                                                "fullName",
                                                "tenantId",
                                                "roleId"
                                            ],
                                            "properties": {
                                                "email": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "testsprite_register_unique@qflow.com"
                                                },
                                                "password": {
                                                    "type": "string",
                                                    "minLength": 8,
                                                    "example": "TestSprite123!"
                                                },
                                                "fullName": {
                                                    "type": "string",
                                                    "example": "TestSprite User"
                                                },
                                                "tenantId": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "11111111-1111-1111-1111-111111111111"
                                                },
                                                "roleId": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "22222222-2222-2222-2222-222222222222"
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "responses": {
                                "201": {
                                    "description": "User created successfully"
                                },
                                "409": {
                                    "description": "User already exists"
                                }
                            }
                        }
                    }
                }
            }
        },
        {
            "name": "User Login",
            "description": "Authenticate user and return JWT token",
            "files": [
                "apps/api/src/auth/auth.controller.ts",
                "apps/api/src/auth/auth.service.ts"
            ],
            "api_doc": {
                "openapi": "3.0.0",
                "paths": {
                    "/auth/login": {
                        "post": {
                            "summary": "Login user",
                            "requestBody": {
                                "required": true,
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "type": "object",
                                            "required": [
                                                "email",
                                                "password"
                                            ],
                                            "properties": {
                                                "email": {
                                                    "type": "string",
                                                    "format": "email",
                                                    "example": "testsprite@qflow.com"
                                                },
                                                "password": {
                                                    "type": "string",
                                                    "example": "TestSprite123!"
                                                },
                                                "mfaCode": {
                                                    "type": "string"
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "responses": {
                                "200": {
                                    "description": "Login successful, returns accessToken"
                                },
                                "401": {
                                    "description": "Invalid credentials"
                                }
                            }
                        }
                    }
                }
            }
        },
        {
            "name": "User Logout",
            "description": "Logout user and invalidate session",
            "files": [
                "apps/api/src/auth/auth.controller.ts",
                "apps/api/src/auth/auth.service.ts"
            ],
            "api_doc": {
                "openapi": "3.0.0",
                "paths": {
                    "/auth/logout": {
                        "post": {
                            "summary": "Logout user",
                            "security": [
                                {
                                    "bearerAuth": []
                                }
                            ],
                            "responses": {
                                "200": {
                                    "description": "Logout successful"
                                },
                                "401": {
                                    "description": "Unauthorized"
                                }
                            }
                        }
                    }
                }
            }
        },
        {
            "name": "MFA Setup",
            "description": "Setup two-factor authentication for user",
            "files": [
                "apps/api/src/auth/auth.controller.ts",
                "apps/api/src/auth/auth.service.ts"
            ],
            "api_doc": {
                "openapi": "3.0.0",
                "paths": {
                    "/auth/mfa/setup": {
                        "post": {
                            "summary": "Setup MFA",
                            "security": [
                                {
                                    "bearerAuth": []
                                }
                            ],
                            "responses": {
                                "200": {
                                    "description": "Returns QR code URL and secret"
                                },
                                "401": {
                                    "description": "Unauthorized"
                                }
                            }
                        }
                    }
                }
            }
        },
        {
            "name": "Check Stock Availability",
            "description": "Check if product variant has sufficient stock at a branch",
            "files": [
                "apps/api/src/inventory/inventory.controller.ts",
                "apps/api/src/inventory/inventory.service.ts"
            ],
            "api_doc": {
                "openapi": "3.0.0",
                "paths": {
                    "/inventory/check-availability": {
                        "post": {
                            "summary": "Check stock availability",
                            "security": [
                                {
                                    "bearerAuth": []
                                }
                            ],
                            "requestBody": {
                                "required": true,
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "type": "object",
                                            "required": [
                                                "variantId",
                                                "branchId",
                                                "quantity"
                                            ],
                                            "properties": {
                                                "variantId": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "66666666-6666-6666-6666-666666666666"
                                                },
                                                "branchId": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "33333333-3333-3333-3333-333333333333"
                                                },
                                                "quantity": {
                                                    "type": "integer",
                                                    "minimum": 1,
                                                    "example": 5
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "responses": {
                                "200": {
                                    "description": "Returns availability status"
                                },
                                "401": {
                                    "description": "Unauthorized"
                                }
                            }
                        }
                    }
                }
            }
        },
        {
            "name": "Create Sale",
            "description": "Create a new sale transaction with items",
            "files": [
                "apps/api/src/sales/sales.controller.ts",
                "apps/api/src/sales/sales.service.ts",
                "apps/api/src/sales/dto/create-sale.dto.ts"
            ],
            "api_doc": {
                "openapi": "3.0.0",
                "paths": {
                    "/sales": {
                        "post": {
                            "summary": "Create a sale",
                            "security": [
                                {
                                    "bearerAuth": []
                                }
                            ],
                            "requestBody": {
                                "required": true,
                                "content": {
                                    "application/json": {
                                        "schema": {
                                            "type": "object",
                                            "required": [
                                                "branchId",
                                                "cashierId",
                                                "paymentMethod",
                                                "items"
                                            ],
                                            "properties": {
                                                "branchId": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "33333333-3333-3333-3333-333333333333"
                                                },
                                                "cashierId": {
                                                    "type": "string",
                                                    "format": "uuid",
                                                    "example": "ecdbde1b-223a-406f-89af-54b6799517bc"
                                                },
                                                "customerId": {
                                                    "type": "string",
                                                    "format": "uuid"
                                                },
                                                "paymentMethod": {
                                                    "type": "string",
                                                    "enum": [
                                                        "cash",
                                                        "card",
                                                        "transfer",
                                                        "mixed"
                                                    ],
                                                    "example": "cash"
                                                },
                                                "items": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "object",
                                                        "required": [
                                                            "variantId",
                                                            "quantity",
                                                            "unitPrice"
                                                        ],
                                                        "properties": {
                                                            "variantId": {
                                                                "type": "string",
                                                                "format": "uuid",
                                                                "example": "66666666-6666-6666-6666-666666666666"
                                                            },
                                                            "quantity": {
                                                                "type": "integer",
                                                                "minimum": 1,
                                                                "example": 2
                                                            },
                                                            "unitPrice": {
                                                                "type": "number",
                                                                "example": 15.99
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            },
                            "responses": {
                                "201": {
                                    "description": "Sale created successfully"
                                },
                                "400": {
                                    "description": "Validation error or insufficient stock"
                                },
                                "401": {
                                    "description": "Unauthorized"
                                }
                            }
                        }
                    }
                }
            }
        }
    ]
}